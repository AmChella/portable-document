<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Viewer with Interactive Highlights</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link rel="stylesheet" href="styles.css">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF Viewer with Interactive Highlights</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Interactive PDF Viewer</h1>
            <p>Upload a PDF and JSON geometry file to see interactive highlights</p>
        </div>
        <div class="controls">
            <div class="file-input-wrapper">
                <label for="pdfFile">PDF Document</label>
                <input type="file" id="pdfFile" accept=".pdf" class="file-input" />
            </div>
            <div class="file-input-wrapper">
                <label for="jsonFile">JSON Geometry</label>
                <input type="file" id="jsonFile" accept=".json" class="file-input" />
            </div>
            <div class="nav-buttons">
                <button id="prevPage" class="nav-button" disabled>‚Üê Previous</button>
                <span class="page-info">Page <span id="pageNum">0</span> / <span id="pageCount">0</span></span>
                <button id="nextPage" class="nav-button" disabled>Next ‚Üí</button>
                <button id="lineSpacingToggle" class="nav-button" disabled>Line Spacing</button>
                <button id="quadModeToggle" class="nav-button" disabled>Paragraph Quads</button>
                <button id="selectModeToggle" class="nav-button" disabled>Text Select</button>
                <button id="quadDebugToggle" class="nav-button" disabled>Quad Debug</button>
            </div>
        </div>
        <div id="statusMessage"></div>
        <div class="pdf-container">
            <div id="emptyState" class="empty-state">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                </svg>
                <h3>No PDF Loaded</h3>
                <p>Upload a PDF file and optionally a JSON geometry file to get started</p>
            </div>
            <div id="pageWrapper" class="page-wrapper" style="display: none;">
                <canvas id="pdfCanvas"></canvas>
                <canvas id="overlayCanvas"></canvas>
            </div>
        </div>
        <div id="tooltip" class="info-tooltip"></div>
        <div id="contextMenu" class="context-menu"></div>
    </div>
    <script src="script.js"></script>

    <!-- Coordinate Submission Modal -->
    <div id="coordModal" class="modal hidden" aria-hidden="true" role="dialog" aria-labelledby="coordModalTitle" aria-modal="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog" role="document">
            <div class="modal-header">
                <h2 id="coordModalTitle">Submit Coordinate</h2>
                <button type="button" class="modal-close" data-close-modal aria-label="Close">√ó</button>
            </div>
            <form id="coordForm" class="modal-body">
                <div class="form-row">
                    <label>Type
                        <select name="itemType" id="coordItemType" required>
                            <option value="word">Word</option>
                            <option value="image">Image</option>
                            <option value="element">Element</option>
                        </select>
                    </label>
                    <label>Page
                        <input type="number" name="page" id="coordPage" min="1" required />
                    </label>
                </div>
                <div class="form-row">
                    <label>PDF X
                        <input type="number" step="0.01" name="pdfX" id="coordPdfX" required />
                    </label>
                    <label>PDF Y
                        <input type="number" step="0.01" name="pdfY" id="coordPdfY" required />
                    </label>
                </div>
                <div class="form-row">
                    <label>Canvas X
                        <input type="number" step="1" name="canvasX" id="coordCanvasX" required />
                    </label>
                    <label>Canvas Y
                        <input type="number" step="1" name="canvasY" id="coordCanvasY" required />
                    </label>
                </div>
                <div class="form-row">
                    <label>ID / Text Reference
                        <input type="text" name="reference" id="coordReference" placeholder="Word text, image #, element id" />
                    </label>
                </div>
                <div class="form-row">
                    <label>Line Number
                        <input type="number" name="lineNumber" id="coordLineNumber" readonly />
                    </label>
                </div>
                <div class="form-row">
                    <label>Line Text
                        <textarea name="lineText" id="coordLineText" rows="2" readonly placeholder="Resolved full line text"></textarea>
                    </label>
                </div>
                <div class="form-row">
                    <label>Notes
                        <textarea name="notes" id="coordNotes" rows="3" placeholder="Optional context or instructions"></textarea>
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn secondary" data-close-modal>Cancel</button>
                    <button type="submit" class="btn primary">Submit</button>
                </div>
                <div id="coordFormStatus" class="form-status" aria-live="polite"></div>
            </form>
        </div>
    </div>
</body>
</html>